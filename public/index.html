<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <title>C.H AI TOWN</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/style.css" />

    <!-- ① 先載入 Phaser，引擎不再缺失 -->
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.80.0/dist/phaser.min.js"></script>
  </head>
  <body>
    <div class="page">
      <!-- 頂部列 -->
      <header class="topbar">
        <div class="brand">
          <div class="brand-logo">C.H</div>
          <div class="brand-text">
            <div class="brand-title">AI TOWN</div>
            <div class="brand-sub">洗衣 · 洗鞋 · 精品包 · 外送小鎮</div>
          </div>
        </div>
      </header>

      <main class="layout">
        <!-- 左：2D 小鎮（這裡改成 game-root，給 Phaser 掛載） -->
        <section class="town-panel">
          <div id="game-root" class="game-root"></div>
          <div class="town-hint">
            💡 操作提示：鍵盤方向鍵可以移動主角；手機點擊小鎮任一位置，圓形角色會走過去。
          </div>
        </section>

        <!-- 右：AI 對話區 -->
        <section class="chat-panel">
          <div class="role-header">
            <div class="role-info">
              <div class="role-label">當前角色</div>
              <div id="current-role-name" class="role-name">C.H 客服</div>
            </div>
            <div class="role-badge" id="role-badge">
              對話 · 介紹服務 · 回覆一般問題
            </div>
          </div>

          <!-- 角色 tabs -->
          <div class="role-tabs" id="role-tabs"></div>

          <!-- 對話框 -->
          <div class="chat-box" id="chat-box"></div>

          <!-- 範例問題 -->
          <div class="quick-questions" id="quick-questions"></div>

          <!-- 輸入區 -->
          <form id="chat-form" class="input-area">
            <input
              id="user-input"
              type="text"
              placeholder="輸入想問這個角色的問題，例如：這個油漬有機會洗乾淨嗎？"
              autocomplete="off"
            />
            <button type="submit">送出</button>
          </form>
        </section>
      </main>
    </div>

    <!-- ② app.js：處理右邊所有角色對話與 roleId（這個檔你已經是新版了） -->
    <script src="/app.js"></script>

    <!-- ③ game.js：啟動小鎮遊戲，現在會找到 id="game-root" -->
    <script src="/game.js"></script>
  </body>
</html>
